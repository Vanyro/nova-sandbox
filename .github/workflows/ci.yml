name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  trigger-workflows:
    name: Trigger Dependent Workflows
    runs-on: ubuntu-latest
    outputs:
      triggered: true
    steps:
      - name: Trigger Lint Workflow
        run: echo "Lint workflow will run automatically on push/PR"

      - name: Trigger Test Workflow
        run: echo "Test workflow depends on lint completion"

      - name: Trigger Build Workflow
        run: echo "Build workflow depends on test completion"

      - name: Trigger Security Workflow
        run: echo "Security workflow depends on build completion"

      - name: Trigger Deploy Workflow
        run: echo "Deploy workflow depends on security completion (main branch only)"

  status-check:
    name: Pipeline Status
    runs-on: ubuntu-latest
    needs: trigger-workflows
    if: always()
    steps:
      - name: Check pipeline status
        run: |
          echo "CI/CD Pipeline initiated."
          echo "Workflows will run in sequence:"
          echo "1. Lint & Type Check"
          echo "2. Test Suite"
          echo "3. Build & Docker"
          echo "4. Security Scan"
          echo "5. Deploy (main branch only)"
          echo ""
          echo "Monitor the Actions tab to see progress."